---
name: Проверка соответствия Avito API putBookingsInfo
overview: Проверить соответствие нашей реализации требованиям Avito API для операции putBookingsInfo и исправить несоответствия
todos: []
---

# Проверка соответствия Avito API putBookingsInfo

## Текущее состояние

### Что работает:

1. **GET /bookings** - Получение бронирований из Avito ✓

- Используется: `GET /short_term_rent/accounts/{accountId}/items/{itemId}/bookings`
- Работает корректно

2. **PUT /availability** - Обновление календаря и цен ✓

- Используется: `PUT /short_term_rent/accounts/{accountId}/items/{itemId}/availability`
- Отправляет даты со статусами (available/booked/blocked) и ценами
- Работает корректно

### Что может отсутствовать:

3. **PUT /bookings** - Отправка информации о бронированиях в Avito ❓

- В коде есть `syncBookingToAvito`, но она только блокирует даты через `/availability`
- Возможно, нужно отправлять детальную информацию о бронированиях через PUT /bookings

## План проверки и исправлений

### Шаг 1: Проверить документацию putBookingsInfo

- Изучить требования к формату запроса PUT /bookings
- Проверить обязательные и опциональные поля
- Уточнить, когда нужно использовать PUT /bookings vs PUT /availability

### Шаг 2: Проверить текущую реализацию

- Проверить, отправляем ли мы бронирования через PUT /bookings
- Проверить формат данных, который мы отправляем
- Сравнить с требованиями документации

### Шаг 3: Исправить несоответствия

- Если PUT /bookings требуется, добавить отправку бронирований
- Исправить формат данных согласно документации
- Обновить логику синхронизации

### Шаг 4: Обновить Edge Function

- Добавить логику отправки бронирований через PUT /bookings (если требуется)
- Улучшить обработку ошибок
- Добавить логирование

## Вопросы для уточнения

1. Нужно ли отправлять бронирования, созданные в нашей системе, обратно в Avito через PUT /bookings?
2. Или достаточно только блокировать даты через PUT /av